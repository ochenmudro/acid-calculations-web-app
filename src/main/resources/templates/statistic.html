<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Статистика</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/statistic.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}"> 
</head>

<body>

    <div th:replace="~{navbar :: navbar}"></div>
    
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="d-flex justify-content-start flex-nowrap align-items-center mb-3">
                <button class="btn btn-table btn-lg me-2 btn-toggle-table" data-table="table-chromatograms"
                    id="showChromatograms">
                    <span>Таблица калибровки</span>
                </button>
                <button class="btn btn-table btn-lg me-2 btn-toggle-table" data-table="table-calculations"
                    id="showCalculations">
                    <span>Таблица концентрации</span>
                </button>
                <input type="text" spellcheck="true" class="form-control flex-grow-1" id="searchInput"
                    placeholder="Введите текст для поиска">
            </div>
            <div class="table-responsive">
                <table class="table" id="chromatogramsTable">
                    <thead>
                        <tr>
                            <th>Название эксперимента</th>
                            <th>Кислота</th>
                            <th>Дата проведения</th>
                            <th>Коэффициент наклона прямой</th>
                            <th class="form-group">
                                <label for="concentration">Концентрация:</label>
                            </th>
                            <th class="form-group">
                                <label for="peakArea">Площадь пика:</label>
                            </th>
                            <th>График</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="chromatogram : ${chromatograms}">
                            <td th:text="${chromatogram.name}"></td>
                            <td th:text="${chromatogram.acid.name}"></td>
                            <td th:text="${chromatogram.date}"></td>
                            <td th:text="${chromatogram.t}"></td>
                            <td>
                                <select class="form-control" id="concentration">
                                    <option th:each="concentration : ${chromatogram.concentrations}"
                                        th:text="${concentration.value}">
                                </select>
                            </td>
                            <td>
                                <select class="form-control" id="peakArea">
                                    <option th:each="peakArea : ${chromatogram.peakAreas}" th:text="${peakArea.value}">
                                </select>
                            </td>
                            <td>
                            <img th:src="${chromatogram.chartImage}" alt="Chart Image" width="300" height="250"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <table class="table" id="calculationsTable">
                <thead>
                    <tr>
                        <th>Название пробы</th>
                        <th>Кислота</th>
                        <th>Дата проведения</th>
                        <th>Абсолютный коэффициент</th>
                        <th>Площадь пика</th>
                        <th>Площадь стандарта</th>
                        <th>Масса стандартной добавки</th>
                        <th>Объём пробы</th>
                        <th>Концентрация</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="calculation: ${calculations}">
                        <td th:text="${calculation.experiment.name}"></td>
                        <td th:text="${calculation.acid.textName}"></td>
                        <td th:text="${calculation.experiment.date}"></td>
                        <td th:text="${calculation.absK}"></td>
                        <td th:text="${calculation.s}"></td>
                        <td th:text="${calculation.sSt}"></td>
                        <td th:text="${calculation.experiment.mSt}"></td>
                        <td th:text="${calculation.experiment.v}"></td>
                        <td th:text="${calculation.concentration}"></td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>

    <script th:src="@{/js/statistic.js}"></script>
    <script th:src="@{/js/navbar.js}"></script>
</body>

</html>